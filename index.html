<!DOCTYPE html>
<script>
// Yıl
document.getElementById('yil').textContent = new Date().getFullYear();


// Kocaman buton: rastgele anket
document.getElementById('randomPoll').addEventListener('click', async () => {
try {
const res = await fetch('/anketler.json', { cache: 'no-store' });
if (!res.ok) throw new Error('no list');
const list = await res.json();
const items = (Array.isArray(list) ? list : []).filter(x => x && x.link);
const pick = items.length ? items[Math.floor(Math.random() * items.length)].link : null;
location.href = pick || '/anketler/anket-1.html';
} catch (_) {
location.href = '/anketler/anket-1.html';
}
});


// Ana sayfa kart doldurma + içerik içi reklam (opsiyonel)
(async () => {
const grid = document.getElementById('pollGrid');
if (!grid) return;
try {
const res = await fetch('/anketler.json');
if (!res.ok) return;
const list = await res.json();
(list || []).slice(0, 12).forEach((it, i) => {
if (!it?.link) return;
const card = document.createElement('a');
card.className = 'card';
card.href = it.link;
card.setAttribute('role', 'listitem');
card.innerHTML = `
<img src="${it.image || '/assets/og-banner.jpg'}" alt="${it.title || 'Anket'}" loading="lazy" />
<div class="card-body">
<h3>${it.title || 'Anket'}</h3>
<p>${it.desc || ''}</p>
</div>
`;
grid.appendChild(card);


if ((i + 1) % 3 === 0) {
const ad = document.createElement('div');
ad.className = 'ad infeed';
ad.innerHTML = `
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXXXXXXX" data-ad-slot="4567890123" data-ad-format="auto" data-full-width-responsive="true"></ins>`;
grid.appendChild(ad);
try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch(e) {}
}
});
} catch(e) {}
})();
</script>
</body>
</html>
